<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>记账支出</title>
    <link rel="stylesheet" href="css/reset1.css">
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/account.css">
    <link rel="stylesheet" href="css/income.css">
</head>
<body>
<div id="header">
    <div id="header-nav" class="header">
        <h1>
            <span>02/02
                <!--<img src="./img/sanjiaoxing.png" alt="">-->
            </span>
            <span ><a class="in-red" href="account.html">支出</a></span>
            <span ><a style="color:#fff" href="./account/spending.html">收入</a></span>
            <span></span>
        </h1>
    </div>
</div>
<!--主体-->
<div class="in-main" style="margin-bottom: 241.6px">
    <ul class="acc-icon">
        <li ><div  class="img-active" ><img src="img/u199.png" alt=""></div><p>餐饮</p></li>
        <li><div><img src="img/u481.png" alt=""></div><p>零食</p></li>
        <li><div><img src="img/u485.png" alt=""></div><p>食物</p></li>
        <li><div><img src="img/u489.png" alt=""></div><p>水果</p></li>
        <li><div><img src="img/u493.png" alt=""></div><p>饮料</p></li>
        <li><div><img src="img/u498.png" alt=""></div><p>通讯</p></li>
        <li><div><img src="img/u502.png" alt=""></div><p>娱乐</p></li>
        <li><div><img src="img/u506.png" alt=""></div><p>运动</p></li>
        <li><div><img src="img/u510.png" alt=""></div><p>旅行</p></li>
        <li><div><img src="img/u514.png" alt=""></div><p>数码</p></li>
        <li><div><img src="img/u519.png" alt=""></div><p>住房</p></li>
        <li><div><img src="img/u523.png" alt=""></div><p>长辈</p></li>
        <li><div><img src="img/u527.png" alt=""></div><p>孩子</p></li>
        <li><div><img src="img/u531.png" alt=""></div><p>美容</p></li>
        <li><div><img src="img/u535.png" alt=""></div><p>化妆</p></li>
        <li><div><img src="img/u540.png" alt=""></div><p>学习</p></li>
        <li><div><img src="img/u544.png" alt=""></div><p>购物</p></li>
        <li><div><img src="img/u548.png" alt=""></div><p>礼物</p></li>
        <li><div><img src="img/u552.png" alt=""></div><p>日用</p></li>
        <li><div><img src="img/u556.png" alt=""></div><p>医疗</p></li>
        <li><div><img src="img/u540.png" alt=""></div><p>学习</p></li>
        <li><div><img src="img/u544.png" alt=""></div><p>购物</p></li>
        <li><div><img src="img/u548.png" alt=""></div><p>礼物</p></li>
        <li><div><img src="img/u552.png" alt=""></div><p>日用</p></li>
        <li><div><img src="img/u556.png" alt=""></div><p>医疗</p></li>
        <li><div><img src="img/u540.png" alt=""></div><p>学习</p></li>
        <li><div><img src="img/u544.png" alt=""></div><p>购物</p></li>
        <li><div><img src="img/u548.png" alt=""></div><p>礼物</p></li>
        <li><div><img src="img/u552.png" alt=""></div><p>日用</p></li>
        <li><div><img src="img/u556.png" alt=""></div><p>医疗</p></li>
    </ul>
    <div style="position: fixed;bottom: 1.84rem;width: 100%;z-index: 99999;background: #fff;">
        <div>
            <img style="display: block;width: 100%;margin-bottom: 10px" src="./img/in-line.png" alt="">
            <div class="acc-beizhu">
                <span>备注:</span>
                <span class="p"> </span>
            </div>
        </div>
        <table style="width:100%;border:1px solid  rgba(171, 171, 171, 1);font-size: 28px">
            <tr>
                <td>1</td>
                <td>2</td>
                <td>3</td>
                <td class="c_func_btn">X</td>
            </tr>
            <tr>
                <td>4</td>
                <td>5</td>
                <td>6</td>
                <td class="c_func_btn">C</td>
            </tr>
            <tr>
                <td>7</td>
                <td>8</td>
                <td>9</td>
                <td class="rowspan" rowspan="2" style="position: relative">
                    <a style="display: block;width:100%;height:100%;line-height: 96px;color:#fff;position: absolute;text-align: center;" href="./bill.html">完成</a>
                </td>
            </tr>
            <tr>
                <td class="c_func_btn">-</td>
                <td>0</td>
                <td class="c_func_btn">+</td>
            </tr>
        </table>
    </div>
</div>
<!--底部-->
<div id="footer-nav">
    <ul>
        <li><a href="./bill.html"><img src="img/bill.png"/><span >账单</span></a></li>
        <li><a href="./income.html"><img src="img/chart.png"/><span>图表</span></a></li>
        <li><a href="./account.html"><img src="img/menu.png"/></a></li>
        <li><a href="./money.html"><img src="img/money.png"/><span>理财</span></a></li>
        <li><a href="./my-profile.html"><img src="img/mine.png"/><span>我</span></a></li>
    </ul>
</div>
</body>
<script src="js/common.js"></script>
<script>
    var imgs=document.querySelectorAll(".acc-icon>li>div");
    for(var i=0;i<imgs.length;i++){
        imgs[i].onclick=function (ev) {
            console.log(ev.path);
            if(!ev.path[1].classList.contains('img-active')){
                var active=document.querySelectorAll(".acc-icon>li>div");
                for(var j=0;j<active.length;j++){
                    console.log(active[j]);
                    active[j].classList.remove('img-active');
                }
                console.log(ev.path);
                ev.path[1].classList.add('img-active');
            }
        }
    }
</script>
<script>
    var btn_wrap = document.getElementsByTagName("table")[0];
    var content = document.getElementsByClassName('p')[0];// 显示器内容
    count = 0; //记录显示屏上字符及数字个数
    bOneDec = false; //表示显示屏一个数字中是否已经有一个小数点的状态
    btn_wrap.onclick = function(e){
        var target = e.target;
        if(target.nodeName.toLowerCase() === 'td'){
            var btnType = target.innerText;
            if((content.innerText == 'Math Error') && (btnType != 'C')){
                return;
            }
            if(btnType == 'C'){
                bOneDec = false;
                content.innerText = '0';
                count = 1;
            }else if(btnType == 'CE'){
                if(content.innerText != ''){
                    if(content.innerText.length === 1){
                        content.innerText = '0';
                    }else{
                        content.innerText = content.innerText.slice(0,-1);
                    }
                    count--;
                }
            }else if(btnType == '完成'){
                var text = content.innerText;
                if(!text){
                    return;
                }else{
                    text = text.replace(/x/g,'*');
                    var result;
                    try{
                        result = eval(text) + '';
                        if(result.search(/\./) > 0){
                            bOneDec = true;
                            if(result.split('.')[1].length > 5){
                                result = (+result).toFixed(5);
                            }
                        }
                        content.innerText = result;
                        count = result.length;
                    }catch(e){
                        content.innerText = 'Math Error';
                    }
                }
            }else{
                if(isNaN(+btnType) && btnType != '.'){
                    bOneDec = false;
                }
                if(btnType == '.'){
                    if(bOneDec){
                        return;
                    }
                    bOneDec = true;
                }
                if(content.innerText == '0' && (!isNaN(+btnType) ||
                        btnType == '(' || btnType == ')')){
                    content.innerText = '';
                }
                content.innerText += btnType;
                if(count++ >= 44){
                    alert('输入的字符过多');
                }
            }
        }
    }
</script>
</html>